<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Blacksmith Lab</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; }
        #gameContainer { position: relative; width: 100%; height: 100%; max-width: 1280px; max-height: 960px; } /* Responsive with original aspect ratio */
        canvas { display: block; width: 100%; height: 100%; } /* Canvas fills gameContainer */
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        .fullscreen #gameContainer {
            max-width: none !important;
            max-height: none !important;
        }
        .fullscreen body {
            align-items: stretch;
            justify-content: stretch;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="ruffle"></canvas>
    </div>
    <button onclick="toggleFullscreen()">Fullscreen</button>

    <script src="ruffle/ruffle.js"></script>
    <script>
        window.addEventListener('load', (event) => {
            const ruffle = window.Ruffle.new({
                publicPath: "/ruffle/", // Adjust if your ruffle folder is elsewhere
                polyfills: true,
            });
            const player = ruffle.createPlayer();
            const container = document.getElementById("ruffle");
            container.appendChild(player);
            player.load({ url: "blacksmith-lab.swf" }); // Ensure correct filename
        });

        const gameContainer = document.getElementById('gameContainer');
        let isFullscreen = false;

        function toggleFullscreen() {
            if (!isFullscreen) {
                if (gameContainer.requestFullscreen) {
                    gameContainer.requestFullscreen();
                } else if (gameContainer.mozRequestFullScreen) { /* Firefox */
                    gameContainer.mozRequestFullScreen();
                } else if (gameContainer.webkitRequestFullscreen) { /* Chrome, Safari & Opera */
                    gameContainer.webkitRequestFullscreen();
                } else if (gameContainer.msRequestFullscreen) { /* IE/Edge */
                    gameContainer.msRequestFullscreen();
                }
                document.body.classList.add('fullscreen');
                isFullscreen = true;
            } else {
                exitFullscreenDocument();
                document.body.classList.remove('fullscreen');
            }
        }

        function exitFullscreenDocument() {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.mozCancelFullScreen) { /* Firefox */
                document.mozCancelFullScreen();
            } else if (document.webkitExitFullscreen) { /* Chrome, Safari & Opera */
                document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) { /* IE/Edge */
                document.msExitFullscreen();
            }
            isFullscreen = false;
        }

        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                exitFullscreenDocument();
                document.body.classList.remove('fullscreen');
            }
        });
    </script>
</body>
</html>
